const e='(\\.autoimg\\.cn/)',t='(/g\\d+/M\\d+[A-F]?/[\\dA-z]+/[\\dA-z]+/)',n='(.*autohome[^_]*__)?',r='autohomecar__',$='(.+\\.(jpe?g|png|gif|bmp))';function c(c,i){const a=new RegExp(`(//.+)${e}(.*)${t}${n}${$}`,'i');if(a.test(c))return c.replace(a,`$1$2$3$4${i}${r}$6`)}function i(){try{return 0===document.createElement('canvas').toDataURL('image/webp').indexOf('data:image/webp')}catch(e){return!1}}let a;function o(o,u){return function(e,t){const n=/\/\/2sc2/;if(n.test(e))return c(e.replace(n,'//www2'),t)}(o,u)||function(n,c){const i=e,a=t.replace('/g','/?g'),o=new RegExp(`(//)(.+)${i}(album/?)?${a}(userphotos/\\d+/\\d+/\\d+/\\d+/)?(ssq_|\\d+_|jh\\d+_)?${$}`,'i');if(o.test(n))return n.replace(o,`$1m1$3clubdfs/$5${c}${r}$8`)}(o,u)||function(t,n){const c=new RegExp(`(//)(car[01])(\\.m)?${e}([\\w/]+/)(.+_)?${$}`,'i');if(c.test(t))return t.replace(c,`$1m0$4cardfs/$5${n}${r}$7`)}(o,u)||function(c,i){const a=new RegExp(`(//)(img[23])${e}(travelplat|pano)${t}${n}${$}`,'i');if(a.test(c))return c.replace(a,`$1m1$3$4$5${i}${r}$7`)}(o,u)||function(t,n){const r=new RegExp(`(//yc[01])${e}(imgs/yc/[\\w/]+/)(.+_)?${$}`,'i');if(r.test(t))return t.replace(r,`$1$2$3${n}$5`)}(o,u)||function(n,r){const c=/\?image(View|Mogr)2.+/,o=new RegExp(`${`(//qnwww[23]${e}youchuang${t}${$})`}(\\?imageView2.+|\\?imageMogr2.+)?`,'i');if(c.test(n)||o.test(n)){const e=r.replace(/(\d+)x(\d+)(.+q(\d+).+)?/,(e,t,n,r,$=87)=>{return void 0===a&&(a=i()),`?imageView2/1/interlace/1/w/${t}/h/${n}/${`format/${a?'webp':`jpg/q/${$}`}/`}`});return c.test(n)?n.replace(c,`${e}`):n.replace(o,`$1${e}`)}}(o,u)||c(o,u)}function u(t,n){if(!new RegExp(`//.+${e}.*${$}`,'i').test(t))return t;return(o(t,n)||t).replace(/https?:/,'')}function s(e,t=2.56){return/iPad/i.test(navigator.userAgent)?e.replace(/(\d+)x(\d+)/,(e,n,r)=>`${Math.ceil(n*t)}x${Math.ceil(r*t)}`):e}function g(e,t=!1){return e.picUrls||e.AppImg||e.FirstCoverImg||e.SecondCoverImg||e.ThirdCoverImg||(t?'//s.autoimg.cn/sou/soum/images/default.png':'')}export{i as checkWebp,g as getImgSrc,u as imgCrop,s as imgScale};
